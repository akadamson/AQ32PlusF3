   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 3
   4              		.fpu fpv4-sp-d16
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.thumb
  15              		.file	"drv_pwmEsc.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.comm	mtk19ProcessDataState,1,1
  20              		.comm	nmeaProcessDataState,1,1
  21              		.comm	ubloxProcessDataState,1,1
  22              		.data
  23              		.align	2
  26              	OutputChannels:
  27 0000 34480140 		.word	1073825844
  28 0004 34080040 		.word	1073743924
  29 0008 38080040 		.word	1073743928
  30 000c 3C080040 		.word	1073743932
  31 0010 40080040 		.word	1073743936
  32 0014 34340140 		.word	1073820724
  33 0018 38340140 		.word	1073820728
  34 001c 3C340140 		.word	1073820732
  35              		.text
  36              		.align	2
  37              		.global	pwmEscInit
  38              		.thumb
  39              		.thumb_func
  41              	pwmEscInit:
  42              	.LFB111:
  43              		.file 1 "../src/drv/drv_pwmEsc.c"
   1:../src/drv/drv_pwmEsc.c **** /*
   2:../src/drv/drv_pwmEsc.c ****   December 2012
   3:../src/drv/drv_pwmEsc.c **** 
   4:../src/drv/drv_pwmEsc.c ****   aq32Plus_F3 Rev -
   5:../src/drv/drv_pwmEsc.c **** 
   6:../src/drv/drv_pwmEsc.c ****   Copyright (c) 2012 John Ihlein.  All rights reserved.
   7:../src/drv/drv_pwmEsc.c **** 
   8:../src/drv/drv_pwmEsc.c ****   Open Source STM32 Based Multicopter Controller Software
   9:../src/drv/drv_pwmEsc.c **** 
  10:../src/drv/drv_pwmEsc.c ****   Includes code and/or ideas from:
  11:../src/drv/drv_pwmEsc.c **** 
  12:../src/drv/drv_pwmEsc.c ****   1)AeroQuad
  13:../src/drv/drv_pwmEsc.c ****   2)BaseFlight
  14:../src/drv/drv_pwmEsc.c ****   3)CH Robotics
  15:../src/drv/drv_pwmEsc.c ****   4)MultiWii
  16:../src/drv/drv_pwmEsc.c ****   5)S.O.H. Madgwick
  17:../src/drv/drv_pwmEsc.c ****   6)UAVX
  18:../src/drv/drv_pwmEsc.c ****   7)STM DiscoveryF3 demonstration software
  19:../src/drv/drv_pwmEsc.c **** 
  20:../src/drv/drv_pwmEsc.c ****   Designed to run on the DiscoveryF3 board
  21:../src/drv/drv_pwmEsc.c **** 
  22:../src/drv/drv_pwmEsc.c ****   This program is free software: you can redistribute it and/or modify
  23:../src/drv/drv_pwmEsc.c ****   it under the terms of the GNU General Public License as published by
  24:../src/drv/drv_pwmEsc.c ****   the Free Software Foundation, either version 3 of the License, or
  25:../src/drv/drv_pwmEsc.c ****   (at your option) any later version.
  26:../src/drv/drv_pwmEsc.c **** 
  27:../src/drv/drv_pwmEsc.c ****   This program is distributed in the hope that it will be useful,
  28:../src/drv/drv_pwmEsc.c ****   but WITHOUT ANY WARRANTY; without even the implied warranty of
  29:../src/drv/drv_pwmEsc.c ****   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  30:../src/drv/drv_pwmEsc.c ****   GNU General Public License for more details.
  31:../src/drv/drv_pwmEsc.c **** 
  32:../src/drv/drv_pwmEsc.c ****   You should have received a copy of the GNU General Public License
  33:../src/drv/drv_pwmEsc.c ****   along with this program. If not, see <http://www.gnu.org/licenses/>.
  34:../src/drv/drv_pwmEsc.c **** */
  35:../src/drv/drv_pwmEsc.c **** 
  36:../src/drv/drv_pwmEsc.c **** ///////////////////////////////////////////////////////////////////////////////
  37:../src/drv/drv_pwmEsc.c **** 
  38:../src/drv/drv_pwmEsc.c **** #include "board.h"
  39:../src/drv/drv_pwmEsc.c **** 
  40:../src/drv/drv_pwmEsc.c **** ///////////////////////////////////////////////////////////////////////////////
  41:../src/drv/drv_pwmEsc.c **** // PWM ESC Defines and Variables
  42:../src/drv/drv_pwmEsc.c **** ///////////////////////////////////////////////////////////////////////////////
  43:../src/drv/drv_pwmEsc.c **** 
  44:../src/drv/drv_pwmEsc.c **** #define ESC_PULSE_1MS    2000  // 1ms pulse width
  45:../src/drv/drv_pwmEsc.c **** #define ESC_PULSE_PERIOD 5000  // pulse period (400Hz)
  46:../src/drv/drv_pwmEsc.c **** 
  47:../src/drv/drv_pwmEsc.c **** static volatile uint32_t *OutputChannels[] = { &(TIM17->CCR1),
  48:../src/drv/drv_pwmEsc.c **** 	                                           &(TIM4->CCR1),
  49:../src/drv/drv_pwmEsc.c **** 	                                           &(TIM4->CCR2),
  50:../src/drv/drv_pwmEsc.c **** 	                                           &(TIM4->CCR3),
  51:../src/drv/drv_pwmEsc.c ****                                                &(TIM4->CCR4),
  52:../src/drv/drv_pwmEsc.c ****                                                &(TIM8->CCR1),
  53:../src/drv/drv_pwmEsc.c ****                                                &(TIM8->CCR2),
  54:../src/drv/drv_pwmEsc.c ****                                                &(TIM8->CCR3), };
  55:../src/drv/drv_pwmEsc.c **** 
  56:../src/drv/drv_pwmEsc.c **** ///////////////////////////////////////////////////////////////////////////////
  57:../src/drv/drv_pwmEsc.c **** // PWM ESC Initialization
  58:../src/drv/drv_pwmEsc.c **** ///////////////////////////////////////////////////////////////////////////////
  59:../src/drv/drv_pwmEsc.c **** 
  60:../src/drv/drv_pwmEsc.c **** void pwmEscInit(uint16_t escPwmRate)
  61:../src/drv/drv_pwmEsc.c **** {
  44              		.loc 1 61 0
  45              		.cfi_startproc
  46              		@ args = 0, pretend = 0, frame = 48
  47              		@ frame_needed = 0, uses_anonymous_args = 0
  48 0000 00B5     		push	{lr}
  49              	.LCFI0:
  50              		.cfi_def_cfa_offset 4
  51              		.cfi_offset 14, -4
  52 0002 8DB0     		sub	sp, sp, #52
  53              	.LCFI1:
  54              		.cfi_def_cfa_offset 56
  55 0004 0346     		mov	r3, r0
  56 0006 ADF80630 		strh	r3, [sp, #6]	@ movhi
  62:../src/drv/drv_pwmEsc.c ****     GPIO_InitTypeDef         GPIO_InitStructure;
  63:../src/drv/drv_pwmEsc.c ****     TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;
  64:../src/drv/drv_pwmEsc.c ****     TIM_OCInitTypeDef        TIM_OCInitStructure;
  65:../src/drv/drv_pwmEsc.c **** 
  66:../src/drv/drv_pwmEsc.c ****     GPIO_StructInit(&GPIO_InitStructure);
  57              		.loc 1 66 0
  58 000a 0AAB     		add	r3, sp, #40
  59 000c 1846     		mov	r0, r3
  60 000e FFF7FEFF 		bl	GPIO_StructInit
  67:../src/drv/drv_pwmEsc.c ****     TIM_TimeBaseStructInit(&TIM_TimeBaseStructure);
  61              		.loc 1 67 0
  62 0012 07AB     		add	r3, sp, #28
  63 0014 1846     		mov	r0, r3
  64 0016 FFF7FEFF 		bl	TIM_TimeBaseStructInit
  68:../src/drv/drv_pwmEsc.c ****     TIM_OCStructInit(&TIM_OCInitStructure);
  65              		.loc 1 68 0
  66 001a 02AB     		add	r3, sp, #8
  67 001c 1846     		mov	r0, r3
  68 001e FFF7FEFF 		bl	TIM_OCStructInit
  69:../src/drv/drv_pwmEsc.c **** 
  70:../src/drv/drv_pwmEsc.c ****     // Outputs
  71:../src/drv/drv_pwmEsc.c ****     // ESC PWM1 TIM17_CH1 PB5
  72:../src/drv/drv_pwmEsc.c ****     // ESC PWM2 TIM4_CH1  PD12
  73:../src/drv/drv_pwmEsc.c ****     // ESC PWM3 TIM4_CH2  PD13
  74:../src/drv/drv_pwmEsc.c ****     // ESC PWM4 TIM4_CH3  PD14
  75:../src/drv/drv_pwmEsc.c ****     // ESC PWM5 TIM4_CH4  PD15
  76:../src/drv/drv_pwmEsc.c ****     // ESC PWM6 TIM8_CH1  PA15
  77:../src/drv/drv_pwmEsc.c ****     // ESC PWM7 TIM8_CH2  PC7
  78:../src/drv/drv_pwmEsc.c ****     // ESC PWM8 TIM8_CH3  PC8
  79:../src/drv/drv_pwmEsc.c **** 
  80:../src/drv/drv_pwmEsc.c ****     RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOA, ENABLE);
  69              		.loc 1 80 0
  70 0022 4FF40030 		mov	r0, #131072
  71 0026 4FF00101 		mov	r1, #1
  72 002a FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
  81:../src/drv/drv_pwmEsc.c ****     RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOB, ENABLE);
  73              		.loc 1 81 0
  74 002e 4FF48020 		mov	r0, #262144
  75 0032 4FF00101 		mov	r1, #1
  76 0036 FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
  82:../src/drv/drv_pwmEsc.c ****     RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOC, ENABLE);
  77              		.loc 1 82 0
  78 003a 4FF40020 		mov	r0, #524288
  79 003e 4FF00101 		mov	r1, #1
  80 0042 FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
  83:../src/drv/drv_pwmEsc.c ****     RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOD, ENABLE);
  81              		.loc 1 83 0
  82 0046 4FF48010 		mov	r0, #1048576
  83 004a 4FF00101 		mov	r1, #1
  84 004e FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
  84:../src/drv/drv_pwmEsc.c **** 
  85:../src/drv/drv_pwmEsc.c ****     RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM4,  ENABLE);
  85              		.loc 1 85 0
  86 0052 4FF00400 		mov	r0, #4
  87 0056 4FF00101 		mov	r1, #1
  88 005a FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
  86:../src/drv/drv_pwmEsc.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_TIM8,  ENABLE);
  89              		.loc 1 86 0
  90 005e 4FF40050 		mov	r0, #8192
  91 0062 4FF00101 		mov	r1, #1
  92 0066 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  87:../src/drv/drv_pwmEsc.c ****     RCC_APB2PeriphClockCmd(RCC_APB2Periph_TIM17, ENABLE);
  93              		.loc 1 87 0
  94 006a 4FF48020 		mov	r0, #262144
  95 006e 4FF00101 		mov	r1, #1
  96 0072 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
  88:../src/drv/drv_pwmEsc.c **** 
  89:../src/drv/drv_pwmEsc.c ****       GPIO_InitStructure.GPIO_Pin   = GPIO_Pin_15;
  97              		.loc 1 89 0
  98 0076 4FF40043 		mov	r3, #32768
  99 007a 0A93     		str	r3, [sp, #40]
  90:../src/drv/drv_pwmEsc.c ****       GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_AF;
 100              		.loc 1 90 0
 101 007c 4FF00203 		mov	r3, #2
 102 0080 8DF82C30 		strb	r3, [sp, #44]
  91:../src/drv/drv_pwmEsc.c ****       GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 103              		.loc 1 91 0
 104 0084 4FF00303 		mov	r3, #3
 105 0088 8DF82D30 		strb	r3, [sp, #45]
  92:../src/drv/drv_pwmEsc.c ****     //GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
  93:../src/drv/drv_pwmEsc.c ****  	//GPIO_InitStructure.GPIO_PuPd  = GPIO_PuPd_NOPULL;
  94:../src/drv/drv_pwmEsc.c **** 
  95:../src/drv/drv_pwmEsc.c ****  	GPIO_Init(GPIOA, &GPIO_InitStructure);
 106              		.loc 1 95 0
 107 008c 4FF09040 		mov	r0, #1207959552
 108 0090 0AAB     		add	r3, sp, #40
 109 0092 1946     		mov	r1, r3
 110 0094 FFF7FEFF 		bl	GPIO_Init
  96:../src/drv/drv_pwmEsc.c **** 
  97:../src/drv/drv_pwmEsc.c ****       GPIO_InitStructure.GPIO_Pin   = GPIO_Pin_5;
 111              		.loc 1 97 0
 112 0098 4FF02003 		mov	r3, #32
 113 009c 0A93     		str	r3, [sp, #40]
  98:../src/drv/drv_pwmEsc.c ****     //GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_AF;
  99:../src/drv/drv_pwmEsc.c ****     //GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 100:../src/drv/drv_pwmEsc.c ****     //GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 101:../src/drv/drv_pwmEsc.c ****  	//GPIO_InitStructure.GPIO_PuPd  = GPIO_PuPd_NOPULL;
 102:../src/drv/drv_pwmEsc.c **** 
 103:../src/drv/drv_pwmEsc.c ****  	GPIO_Init(GPIOB, &GPIO_InitStructure);
 114              		.loc 1 103 0
 115 009e 4FF48060 		mov	r0, #1024
 116 00a2 C4F60000 		movt	r0, 18432
 117 00a6 0AAB     		add	r3, sp, #40
 118 00a8 1946     		mov	r1, r3
 119 00aa FFF7FEFF 		bl	GPIO_Init
 104:../src/drv/drv_pwmEsc.c **** 
 105:../src/drv/drv_pwmEsc.c ****       GPIO_InitStructure.GPIO_Pin   = GPIO_Pin_7 | GPIO_Pin_8;
 120              		.loc 1 105 0
 121 00ae 4FF4C073 		mov	r3, #384
 122 00b2 0A93     		str	r3, [sp, #40]
 106:../src/drv/drv_pwmEsc.c ****     //GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_AF;
 107:../src/drv/drv_pwmEsc.c ****     //GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 108:../src/drv/drv_pwmEsc.c ****     //GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 109:../src/drv/drv_pwmEsc.c ****  	//GPIO_InitStructure.GPIO_PuPd  = GPIO_PuPd_NOPULL;
 110:../src/drv/drv_pwmEsc.c **** 
 111:../src/drv/drv_pwmEsc.c ****  	GPIO_Init(GPIOC, &GPIO_InitStructure);
 123              		.loc 1 111 0
 124 00b4 4FF40060 		mov	r0, #2048
 125 00b8 C4F60000 		movt	r0, 18432
 126 00bc 0AAB     		add	r3, sp, #40
 127 00be 1946     		mov	r1, r3
 128 00c0 FFF7FEFF 		bl	GPIO_Init
 112:../src/drv/drv_pwmEsc.c **** 
 113:../src/drv/drv_pwmEsc.c ****     GPIO_InitStructure.GPIO_Pin   = GPIO_Pin_12 | GPIO_Pin_13 | GPIO_Pin_14 | GPIO_Pin_15;
 129              		.loc 1 113 0
 130 00c4 4FF47043 		mov	r3, #61440
 131 00c8 0A93     		str	r3, [sp, #40]
 114:../src/drv/drv_pwmEsc.c ****   //GPIO_InitStructure.GPIO_Mode  = GPIO_Mode_AF;
 115:../src/drv/drv_pwmEsc.c ****   //GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 116:../src/drv/drv_pwmEsc.c ****   //GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
 117:../src/drv/drv_pwmEsc.c **** 	//GPIO_InitStructure.GPIO_PuPd  = GPIO_PuPd_NOPULL;
 118:../src/drv/drv_pwmEsc.c **** 
 119:../src/drv/drv_pwmEsc.c **** 	GPIO_Init(GPIOD, &GPIO_InitStructure);
 132              		.loc 1 119 0
 133 00ca 4FF44060 		mov	r0, #3072
 134 00ce C4F60000 		movt	r0, 18432
 135 00d2 0AAB     		add	r3, sp, #40
 136 00d4 1946     		mov	r1, r3
 137 00d6 FFF7FEFF 		bl	GPIO_Init
 120:../src/drv/drv_pwmEsc.c **** 
 121:../src/drv/drv_pwmEsc.c **** 	GPIO_PinAFConfig(GPIOA, GPIO_PinSource15, GPIO_AF_2);
 138              		.loc 1 121 0
 139 00da 4FF09040 		mov	r0, #1207959552
 140 00de 4FF00F01 		mov	r1, #15
 141 00e2 4FF00202 		mov	r2, #2
 142 00e6 FFF7FEFF 		bl	GPIO_PinAFConfig
 122:../src/drv/drv_pwmEsc.c **** 
 123:../src/drv/drv_pwmEsc.c **** 	GPIO_PinAFConfig(GPIOB, GPIO_PinSource5,  GPIO_AF_4);
 143              		.loc 1 123 0
 144 00ea 4FF48060 		mov	r0, #1024
 145 00ee C4F60000 		movt	r0, 18432
 146 00f2 4FF00501 		mov	r1, #5
 147 00f6 4FF00402 		mov	r2, #4
 148 00fa FFF7FEFF 		bl	GPIO_PinAFConfig
 124:../src/drv/drv_pwmEsc.c **** 
 125:../src/drv/drv_pwmEsc.c **** 	GPIO_PinAFConfig(GPIOC, GPIO_PinSource7,  GPIO_AF_2);
 149              		.loc 1 125 0
 150 00fe 4FF40060 		mov	r0, #2048
 151 0102 C4F60000 		movt	r0, 18432
 152 0106 4FF00701 		mov	r1, #7
 153 010a 4FF00202 		mov	r2, #2
 154 010e FFF7FEFF 		bl	GPIO_PinAFConfig
 126:../src/drv/drv_pwmEsc.c **** 	GPIO_PinAFConfig(GPIOC, GPIO_PinSource8,  GPIO_AF_2);
 155              		.loc 1 126 0
 156 0112 4FF40060 		mov	r0, #2048
 157 0116 C4F60000 		movt	r0, 18432
 158 011a 4FF00801 		mov	r1, #8
 159 011e 4FF00202 		mov	r2, #2
 160 0122 FFF7FEFF 		bl	GPIO_PinAFConfig
 127:../src/drv/drv_pwmEsc.c **** 
 128:../src/drv/drv_pwmEsc.c **** 	GPIO_PinAFConfig(GPIOD, GPIO_PinSource12, GPIO_AF_2);
 161              		.loc 1 128 0
 162 0126 4FF44060 		mov	r0, #3072
 163 012a C4F60000 		movt	r0, 18432
 164 012e 4FF00C01 		mov	r1, #12
 165 0132 4FF00202 		mov	r2, #2
 166 0136 FFF7FEFF 		bl	GPIO_PinAFConfig
 129:../src/drv/drv_pwmEsc.c **** 	GPIO_PinAFConfig(GPIOD, GPIO_PinSource13, GPIO_AF_2);
 167              		.loc 1 129 0
 168 013a 4FF44060 		mov	r0, #3072
 169 013e C4F60000 		movt	r0, 18432
 170 0142 4FF00D01 		mov	r1, #13
 171 0146 4FF00202 		mov	r2, #2
 172 014a FFF7FEFF 		bl	GPIO_PinAFConfig
 130:../src/drv/drv_pwmEsc.c **** 	GPIO_PinAFConfig(GPIOD, GPIO_PinSource14, GPIO_AF_2);
 173              		.loc 1 130 0
 174 014e 4FF44060 		mov	r0, #3072
 175 0152 C4F60000 		movt	r0, 18432
 176 0156 4FF00E01 		mov	r1, #14
 177 015a 4FF00202 		mov	r2, #2
 178 015e FFF7FEFF 		bl	GPIO_PinAFConfig
 131:../src/drv/drv_pwmEsc.c **** 	GPIO_PinAFConfig(GPIOD, GPIO_PinSource15, GPIO_AF_2);
 179              		.loc 1 131 0
 180 0162 4FF44060 		mov	r0, #3072
 181 0166 C4F60000 		movt	r0, 18432
 182 016a 4FF00F01 		mov	r1, #15
 183 016e 4FF00202 		mov	r2, #2
 184 0172 FFF7FEFF 		bl	GPIO_PinAFConfig
 132:../src/drv/drv_pwmEsc.c **** 
 133:../src/drv/drv_pwmEsc.c ****     // Output timers
 134:../src/drv/drv_pwmEsc.c **** 
 135:../src/drv/drv_pwmEsc.c ****       TIM_TimeBaseStructure.TIM_Period            = (uint16_t)(2000000 / escPwmRate) - 1;
 185              		.loc 1 135 0
 186 0176 BDF80620 		ldrh	r2, [sp, #6]
 187 017a 48F28043 		movw	r3, #33920
 188 017e C0F21E03 		movt	r3, 30
 189 0182 93FBF2F3 		sdiv	r3, r3, r2
 190 0186 9BB2     		uxth	r3, r3
 191 0188 03F1FF33 		add	r3, r3, #-1
 192 018c 0893     		str	r3, [sp, #32]
 136:../src/drv/drv_pwmEsc.c ****       TIM_TimeBaseStructure.TIM_Prescaler         = 36 - 1;
 193              		.loc 1 136 0
 194 018e 4FF02303 		mov	r3, #35
 195 0192 ADF81C30 		strh	r3, [sp, #28]	@ movhi
 137:../src/drv/drv_pwmEsc.c ****     //TIM_TimeBaseStructure.TIM_ClockDivision     = TIM_CKD_DIV1;
 138:../src/drv/drv_pwmEsc.c ****     //TIM_TimeBaseStructure.TIM_CounterMode       = TIM_CounterMode_Up;
 139:../src/drv/drv_pwmEsc.c ****     //TIM_TimeBaseStructure.TIM_RepititionCounter = 0x0000;
 140:../src/drv/drv_pwmEsc.c **** 
 141:../src/drv/drv_pwmEsc.c ****     TIM_TimeBaseInit(TIM4,  &TIM_TimeBaseStructure);
 196              		.loc 1 141 0
 197 0196 4FF40060 		mov	r0, #2048
 198 019a C4F20000 		movt	r0, 16384
 199 019e 07AB     		add	r3, sp, #28
 200 01a0 1946     		mov	r1, r3
 201 01a2 FFF7FEFF 		bl	TIM_TimeBaseInit
 142:../src/drv/drv_pwmEsc.c ****     TIM_TimeBaseInit(TIM8,  &TIM_TimeBaseStructure);
 202              		.loc 1 142 0
 203 01a6 4FF45050 		mov	r0, #13312
 204 01aa C4F20100 		movt	r0, 16385
 205 01ae 07AB     		add	r3, sp, #28
 206 01b0 1946     		mov	r1, r3
 207 01b2 FFF7FEFF 		bl	TIM_TimeBaseInit
 143:../src/drv/drv_pwmEsc.c ****     TIM_TimeBaseInit(TIM17, &TIM_TimeBaseStructure);
 208              		.loc 1 143 0
 209 01b6 4FF49040 		mov	r0, #18432
 210 01ba C4F20100 		movt	r0, 16385
 211 01be 07AB     		add	r3, sp, #28
 212 01c0 1946     		mov	r1, r3
 213 01c2 FFF7FEFF 		bl	TIM_TimeBaseInit
 144:../src/drv/drv_pwmEsc.c **** 
 145:../src/drv/drv_pwmEsc.c ****       TIM_OCInitStructure.TIM_OCMode       = TIM_OCMode_PWM2;
 214              		.loc 1 145 0
 215 01c6 4FF07003 		mov	r3, #112
 216 01ca 0293     		str	r3, [sp, #8]
 146:../src/drv/drv_pwmEsc.c ****       TIM_OCInitStructure.TIM_OutputState  = TIM_OutputState_Enable;
 217              		.loc 1 146 0
 218 01cc 4FF00103 		mov	r3, #1
 219 01d0 ADF80C30 		strh	r3, [sp, #12]	@ movhi
 147:../src/drv/drv_pwmEsc.c ****     //TIM_OCInitStructure.TIM_OutputNState = TIM_OutputNState_Disable;
 148:../src/drv/drv_pwmEsc.c ****       TIM_OCInitStructure.TIM_Pulse        = ESC_PULSE_1MS;
 220              		.loc 1 148 0
 221 01d4 4FF4FA63 		mov	r3, #2000
 222 01d8 0493     		str	r3, [sp, #16]
 149:../src/drv/drv_pwmEsc.c ****       TIM_OCInitStructure.TIM_OCPolarity   = TIM_OCPolarity_Low;
 223              		.loc 1 149 0
 224 01da 4FF00203 		mov	r3, #2
 225 01de ADF81430 		strh	r3, [sp, #20]	@ movhi
 150:../src/drv/drv_pwmEsc.c ****     //TIM_OCInitStructure.TIM_OCNPolarity  = TIM_OCPolarity_High;
 151:../src/drv/drv_pwmEsc.c ****       TIM_OCInitStructure.TIM_OCIdleState  = TIM_OCIdleState_Set;
 226              		.loc 1 151 0
 227 01e2 4FF48073 		mov	r3, #256
 228 01e6 ADF81830 		strh	r3, [sp, #24]	@ movhi
 152:../src/drv/drv_pwmEsc.c ****     //TIM_OCInitStructure.TIM_OCNIdleState = TIM_OCNIdleState_Reset;
 153:../src/drv/drv_pwmEsc.c **** 
 154:../src/drv/drv_pwmEsc.c ****     TIM_OC1Init(TIM4,  &TIM_OCInitStructure);
 229              		.loc 1 154 0
 230 01ea 4FF40060 		mov	r0, #2048
 231 01ee C4F20000 		movt	r0, 16384
 232 01f2 02AB     		add	r3, sp, #8
 233 01f4 1946     		mov	r1, r3
 234 01f6 FFF7FEFF 		bl	TIM_OC1Init
 155:../src/drv/drv_pwmEsc.c ****     TIM_OC2Init(TIM4,  &TIM_OCInitStructure);
 235              		.loc 1 155 0
 236 01fa 4FF40060 		mov	r0, #2048
 237 01fe C4F20000 		movt	r0, 16384
 238 0202 02AB     		add	r3, sp, #8
 239 0204 1946     		mov	r1, r3
 240 0206 FFF7FEFF 		bl	TIM_OC2Init
 156:../src/drv/drv_pwmEsc.c ****     TIM_OC3Init(TIM4,  &TIM_OCInitStructure);
 241              		.loc 1 156 0
 242 020a 4FF40060 		mov	r0, #2048
 243 020e C4F20000 		movt	r0, 16384
 244 0212 02AB     		add	r3, sp, #8
 245 0214 1946     		mov	r1, r3
 246 0216 FFF7FEFF 		bl	TIM_OC3Init
 157:../src/drv/drv_pwmEsc.c ****     TIM_OC4Init(TIM4,  &TIM_OCInitStructure);
 247              		.loc 1 157 0
 248 021a 4FF40060 		mov	r0, #2048
 249 021e C4F20000 		movt	r0, 16384
 250 0222 02AB     		add	r3, sp, #8
 251 0224 1946     		mov	r1, r3
 252 0226 FFF7FEFF 		bl	TIM_OC4Init
 158:../src/drv/drv_pwmEsc.c **** 
 159:../src/drv/drv_pwmEsc.c ****     TIM_OC1Init(TIM8,  &TIM_OCInitStructure);
 253              		.loc 1 159 0
 254 022a 4FF45050 		mov	r0, #13312
 255 022e C4F20100 		movt	r0, 16385
 256 0232 02AB     		add	r3, sp, #8
 257 0234 1946     		mov	r1, r3
 258 0236 FFF7FEFF 		bl	TIM_OC1Init
 160:../src/drv/drv_pwmEsc.c ****     TIM_OC2Init(TIM8,  &TIM_OCInitStructure);
 259              		.loc 1 160 0
 260 023a 4FF45050 		mov	r0, #13312
 261 023e C4F20100 		movt	r0, 16385
 262 0242 02AB     		add	r3, sp, #8
 263 0244 1946     		mov	r1, r3
 264 0246 FFF7FEFF 		bl	TIM_OC2Init
 161:../src/drv/drv_pwmEsc.c ****     TIM_OC3Init(TIM8,  &TIM_OCInitStructure);
 265              		.loc 1 161 0
 266 024a 4FF45050 		mov	r0, #13312
 267 024e C4F20100 		movt	r0, 16385
 268 0252 02AB     		add	r3, sp, #8
 269 0254 1946     		mov	r1, r3
 270 0256 FFF7FEFF 		bl	TIM_OC3Init
 162:../src/drv/drv_pwmEsc.c **** 
 163:../src/drv/drv_pwmEsc.c ****     TIM_OC1Init(TIM17, &TIM_OCInitStructure);
 271              		.loc 1 163 0
 272 025a 4FF49040 		mov	r0, #18432
 273 025e C4F20100 		movt	r0, 16385
 274 0262 02AB     		add	r3, sp, #8
 275 0264 1946     		mov	r1, r3
 276 0266 FFF7FEFF 		bl	TIM_OC1Init
 164:../src/drv/drv_pwmEsc.c **** 
 165:../src/drv/drv_pwmEsc.c ****     TIM_Cmd(TIM4,  ENABLE);
 277              		.loc 1 165 0
 278 026a 4FF40060 		mov	r0, #2048
 279 026e C4F20000 		movt	r0, 16384
 280 0272 4FF00101 		mov	r1, #1
 281 0276 FFF7FEFF 		bl	TIM_Cmd
 166:../src/drv/drv_pwmEsc.c ****     TIM_Cmd(TIM8,  ENABLE);
 282              		.loc 1 166 0
 283 027a 4FF45050 		mov	r0, #13312
 284 027e C4F20100 		movt	r0, 16385
 285 0282 4FF00101 		mov	r1, #1
 286 0286 FFF7FEFF 		bl	TIM_Cmd
 167:../src/drv/drv_pwmEsc.c ****     TIM_Cmd(TIM17, ENABLE);
 287              		.loc 1 167 0
 288 028a 4FF49040 		mov	r0, #18432
 289 028e C4F20100 		movt	r0, 16385
 290 0292 4FF00101 		mov	r1, #1
 291 0296 FFF7FEFF 		bl	TIM_Cmd
 168:../src/drv/drv_pwmEsc.c **** 
 169:../src/drv/drv_pwmEsc.c ****     TIM_CtrlPWMOutputs(TIM4,  ENABLE);
 292              		.loc 1 169 0
 293 029a 4FF40060 		mov	r0, #2048
 294 029e C4F20000 		movt	r0, 16384
 295 02a2 4FF00101 		mov	r1, #1
 296 02a6 FFF7FEFF 		bl	TIM_CtrlPWMOutputs
 170:../src/drv/drv_pwmEsc.c ****     TIM_CtrlPWMOutputs(TIM8,  ENABLE);
 297              		.loc 1 170 0
 298 02aa 4FF45050 		mov	r0, #13312
 299 02ae C4F20100 		movt	r0, 16385
 300 02b2 4FF00101 		mov	r1, #1
 301 02b6 FFF7FEFF 		bl	TIM_CtrlPWMOutputs
 171:../src/drv/drv_pwmEsc.c ****     TIM_CtrlPWMOutputs(TIM17, ENABLE);
 302              		.loc 1 171 0
 303 02ba 4FF49040 		mov	r0, #18432
 304 02be C4F20100 		movt	r0, 16385
 305 02c2 4FF00101 		mov	r1, #1
 306 02c6 FFF7FEFF 		bl	TIM_CtrlPWMOutputs
 172:../src/drv/drv_pwmEsc.c **** 
 173:../src/drv/drv_pwmEsc.c **** }
 307              		.loc 1 173 0
 308 02ca 0DB0     		add	sp, sp, #52
 309 02cc 00BD     		pop	{pc}
 310              		.cfi_endproc
 311              	.LFE111:
 313 02ce 00BF     		.align	2
 314              		.global	pwmEscWrite
 315              		.thumb
 316              		.thumb_func
 318              	pwmEscWrite:
 319              	.LFB112:
 174:../src/drv/drv_pwmEsc.c **** 
 175:../src/drv/drv_pwmEsc.c **** ///////////////////////////////////////////////////////////////////////////////
 176:../src/drv/drv_pwmEsc.c **** // PWM ESC Write
 177:../src/drv/drv_pwmEsc.c **** ///////////////////////////////////////////////////////////////////////////////
 178:../src/drv/drv_pwmEsc.c **** 
 179:../src/drv/drv_pwmEsc.c **** void pwmEscWrite(uint8_t channel, uint16_t value)
 180:../src/drv/drv_pwmEsc.c **** {
 320              		.loc 1 180 0
 321              		.cfi_startproc
 322              		@ args = 0, pretend = 0, frame = 8
 323              		@ frame_needed = 0, uses_anonymous_args = 0
 324              		@ link register save eliminated.
 325 02d0 82B0     		sub	sp, sp, #8
 326              	.LCFI2:
 327              		.cfi_def_cfa_offset 8
 328 02d2 0246     		mov	r2, r0
 329 02d4 0B46     		mov	r3, r1
 330 02d6 8DF80720 		strb	r2, [sp, #7]
 331 02da ADF80430 		strh	r3, [sp, #4]	@ movhi
 181:../src/drv/drv_pwmEsc.c ****     *OutputChannels[channel] = value;
 332              		.loc 1 181 0
 333 02de 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 334 02e2 40F20003 		movw	r3, #:lower16:OutputChannels
 335 02e6 C0F20003 		movt	r3, #:upper16:OutputChannels
 336 02ea 53F82230 		ldr	r3, [r3, r2, lsl #2]
 337 02ee BDF80420 		ldrh	r2, [sp, #4]
 338 02f2 1A60     		str	r2, [r3, #0]
 182:../src/drv/drv_pwmEsc.c **** }
 339              		.loc 1 182 0
 340 02f4 02B0     		add	sp, sp, #8
 341 02f6 7047     		bx	lr
 342              		.cfi_endproc
 343              	.LFE112:
 345              	.Letext0:
 346              		.file 2 "c:\\program files\\codesourcery\\sourcery_codebench_lite_for_arm_eabi\\bin\\../lib/gcc/ar
 347              		.file 3 "D:\\Documents and Settings\\e722209\\Desktop\\workspace\\aq32Plus_F3\\Libraries\\Device\\
 348              		.file 4 "D:\\Documents and Settings\\e722209\\Desktop\\workspace\\aq32Plus_F3\\Libraries\\STM32F30
 349              		.file 5 "D:\\Documents and Settings\\e722209\\Desktop\\workspace\\aq32Plus_F3\\Libraries\\STM32F30
 350              		.file 6 "D:\\Documents and Settings\\e722209\\Desktop\\workspace\\aq32Plus_F3\\src\\gps/gpsMediaTe
 351              		.file 7 "D:\\Documents and Settings\\e722209\\Desktop\\workspace\\aq32Plus_F3\\src\\gps/gpsNMEA.h"
 352              		.file 8 "D:\\Documents and Settings\\e722209\\Desktop\\workspace\\aq32Plus_F3\\src\\gps/gpsUblox.h
 353              		.file 9 "D:\\Documents and Settings\\e722209\\Desktop\\workspace\\aq32Plus_F3\\Libraries\\CMSIS\\I
DEFINED SYMBOLS
                            *ABS*:00000000 drv_pwmEsc.c
                            *COM*:00000001 mtk19ProcessDataState
                            *COM*:00000001 nmeaProcessDataState
                            *COM*:00000001 ubloxProcessDataState
D:\DOCUME~1\e722209\LOCALS~1\Temp\ccNHquak.s:23     .data:00000000 $d
D:\DOCUME~1\e722209\LOCALS~1\Temp\ccNHquak.s:26     .data:00000000 OutputChannels
D:\DOCUME~1\e722209\LOCALS~1\Temp\ccNHquak.s:36     .text:00000000 $t
D:\DOCUME~1\e722209\LOCALS~1\Temp\ccNHquak.s:41     .text:00000000 pwmEscInit
D:\DOCUME~1\e722209\LOCALS~1\Temp\ccNHquak.s:318    .text:000002d0 pwmEscWrite
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
GPIO_StructInit
TIM_TimeBaseStructInit
TIM_OCStructInit
RCC_AHBPeriphClockCmd
RCC_APB1PeriphClockCmd
RCC_APB2PeriphClockCmd
GPIO_Init
GPIO_PinAFConfig
TIM_TimeBaseInit
TIM_OC1Init
TIM_OC2Init
TIM_OC3Init
TIM_OC4Init
TIM_Cmd
TIM_CtrlPWMOutputs
